{"version":3,"file":"static/js/660.d99a71a0.chunk.js","mappings":"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","sources":["Components/Cart/Cart.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { CartContext } from '../../Context/CartContext'\r\nimport { UserToken } from '../../Context/UserToken'\r\nimport Loading from '../Loading'\r\nimport cartimg from '../../assets/preview.png'\r\nimport { Box, Modal } from '@mui/material'\r\nimport { useFormik } from 'formik'\r\n\r\n\r\nexport default function Cart() {\r\n  let { getCart, deleteCart, updateCart, setCartNums, checkout, cartId, setCartId } = useContext(CartContext)\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  async function SubmitForm(values) {\r\n\r\n    let res = await checkout(cartId, values)\r\n    if (res?.data.status === 'success')\r\n      window.location.href = res?.data.session?.url\r\n  }\r\n  const style = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 400,\r\n    bgcolor: 'background.paper',\r\n    border: '2px solid #000',\r\n    boxShadow: 24,\r\n    p: 4,\r\n  };\r\n\r\n  let formik = useFormik({\r\n    initialValues: {\r\n      details: \"\",\r\n      phone: \"\",\r\n      city: \"\"\r\n    },\r\n    onSubmit: SubmitForm\r\n  })\r\n\r\n\r\n  let { isLogin } = useContext(UserToken)\r\n  let [data, setData] = useState(null)\r\n  let [loading, setLoading] = useState(false)\r\n\r\n\r\n  async function getCartFun() {\r\n    setLoading(true)\r\n    let res = await getCart()\r\n    if (res?.data?.status === 'success') {\r\n      setData(res?.data)\r\n      setCartId(res.data.data._id);\r\n      setCartNums(res?.data.numOfCartItems);\r\n      setLoading(false)\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  async function deleteCartFun(id) {\r\n    let res = await deleteCart(id)\r\n    if (res.data.status === 'success') {\r\n      setData(res?.data)\r\n      setCartNums(res?.data.numOfCartItems);\r\n    }\r\n  }\r\n  async function updateCartFun(id, count) {\r\n    if (count === 0)\r\n      deleteCartFun(id)\r\n    else {\r\n      let res = await updateCart(id, count)\r\n      if (res.data.status === 'success') {\r\n        setData(res?.data)\r\n        setCartNums(res?.data.numOfCartItems);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (isLogin == null)\r\n      return\r\n    getCartFun()\r\n  }, [isLogin])\r\n\r\n  if (loading)\r\n    return <div className='container '>\r\n      <h3 className='my-3 text-left'>your cart is loading ...</h3>\r\n      <Loading></Loading>\r\n    </div>\r\n  return (\r\n    <div className='container'>\r\n\r\n      {!data?.data.totalCartPrice ? <div className='text-center'>\r\n        <p className='text-start fw-bold'>your cart is empty</p>\r\n        <img src={cartimg} alt=\"img\" />\r\n      </div> : <div>\r\n        <h3 className='h4 my-3'>{'total cart Price ' + data?.data.totalCartPrice}</h3>\r\n        <div className=\"cart-box p-3 bg-main-light  my-2\">\r\n          <h2>Shop Cart</h2>\r\n          {data?.data.products.map((prod) => <div key={prod.product._id} className='row align-items-center justify-content-between '>\r\n            <div className=\"col-md-8\">\r\n              <div className=\"row my-3 align-items-center \">\r\n                <div className=\"col-md-2\">\r\n                  <img src={prod.product.imageCover} className='w-100' alt=\"img\" />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                  <p>{prod.product.title}</p>\r\n                  <p className='text-main'>{prod.price}</p>\r\n                  <span className='cursor-pointer' onClick={() => { deleteCartFun(prod.product._id) }}> <i className='fa-solid fa-trash text-main'></i> Remove </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 d-flex justify-content-end\">\r\n              <button className='btn text-main border border-1 border-success p-1' onClick={() => { updateCartFun(prod.product._id.toString(), prod.count + 1) }}>+</button>\r\n              <span className='mx-2'>{prod.count}</span>\r\n              <button className='btn text-main border border-1 border-success p-1' onClick={() => { updateCartFun(prod.product._id, prod.count > 0 ? prod.count - 1 : 0) }}>-</button>\r\n            </div>\r\n          </div>)}\r\n        </div>\r\n\r\n        <button className='bg-main text-white my-3 btn' onClick={handleOpen}>Check out</button>\r\n\r\n      </div>}\r\n      {/* modal */}\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={style}>\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <input type=\"text\" className='form-control my-2' name='details' onChange={formik.handleChange} value={formik.values.details} placeholder='address ' />\r\n            <input type=\"tel\" className='form-control my-2' name='phone' onChange={formik.handleChange} value={formik.values.phone} placeholder='phone ' />\r\n            <input type=\"text\" className='form-control my-2' name='city' onChange={formik.handleChange} value={formik.values.city} placeholder='city ' />\r\n            <button className='btn bg-main text-white' type='submit'>send</button>\r\n          </form>\r\n        </Box>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["Cart","_useContext","useContext","CartContext","getCart","deleteCart","updateCart","setCartNums","checkout","cartId","setCartId","_React$useState","React","_React$useState2","_slicedToArray","open","setOpen","_SubmitForm","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","_res$data$session","res","wrap","_context","prev","next","sent","data","status","window","location","href","session","url","stop","apply","arguments","formik","useFormik","initialValues","details","phone","city","onSubmit","_x","isLogin","UserToken","_useState","useState","_useState2","setData","_useState3","_useState4","loading","setLoading","_getCartFun","_callee2","_res$data","_context2","_id","numOfCartItems","deleteCartFun","_x2","_deleteCartFun","_callee3","id","_context3","updateCartFun","_x3","_x4","_updateCartFun","_callee4","count","_context4","useEffect","getCartFun","_jsxs","className","children","_jsx","Loading","totalCartPrice","products","map","prod","src","product","imageCover","alt","title","price","onClick","toString","cartimg","Modal","onClose","Box","sx","position","top","left","transform","width","bgcolor","border","boxShadow","p","handleSubmit","type","name","onChange","handleChange","value","placeholder"],"sourceRoot":""}